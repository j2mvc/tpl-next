{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport React from 'react';\nimport Error from 'next/error';\nimport ActiveLink from \"../../components/Activelink\";\nimport api from \"../../api\";\nimport \"../../assets/style.scss\";\nimport PageUI from '../../components/PageUI';\nimport HtmlHeader from \"../../components/HtmlHeader\";\nimport request from \"../../api/request\";\nimport Router from 'next/router';\n\nvar loadData =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(query) {\n    var props, res1, res2;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            props = {};\n            _context.next = 3;\n            return api.request.get({\n              url: '/getCats',\n              params: {\n                moduleId: '201412290839325502'\n              },\n              cache: true\n            });\n\n          case 3:\n            res1 = _context.sent;\n            _context.next = 6;\n            return api.request.get({\n              url: '/getContentList',\n              params: {\n                catId: query.catId\n              },\n              cache: true\n            });\n\n          case 6:\n            res2 = _context.sent;\n            if (res1.code == 1) props.catList = res1.data.list;else {\n              props.catError = res1.error;\n            }\n\n            if (res2.code == 1) {\n              props.contentList = res2.data.list;\n            } else {\n              props.contentError = res2.error;\n            }\n\n            props.title = props.catList[0].name;\n            props.keywords = \"文章列表关键词\";\n            props.description = \"这里是文章列表描述\";\n            console.log('list getInitialProps ended....');\n            return _context.abrupt(\"return\", props);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function loadData(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar Page =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Page, _React$Component);\n\n  function Page() {\n    _classCallCheck(this, Page);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Page).apply(this, arguments));\n  }\n\n  _createClass(Page, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log('start componentDidMount....');\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      console.log('start componentDidUpdate....');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log('start render....');\n\n      if (this.props.error) {\n        return React.createElement(Error, {\n          statusCode: this.props.error.code\n        });\n      }\n\n      var ua = React.createElement(\"div\", {\n        className: \"example\"\n      }, \"Hello World!\");\n      var items = this.props.contentList.map(function (item) {\n        return React.createElement(\"li\", {\n          key: item.id\n        }, React.createElement(ActiveLink, {\n          as: \"/c/i/\".concat(item.id),\n          href: {\n            pathname: '/content/info',\n            query: {\n              id: item.id\n            }\n          },\n          passHref: true\n        }, item.title));\n      });\n      return React.createElement(\"div\", null, React.createElement(HtmlHeader, {\n        ktitle: this.props.title,\n        keywords: this.props.keywords,\n        description: this.props.description\n      }), React.createElement(PageUI.Navbar, {\n        list: this.props.catList\n      }), React.createElement(\"div\", null, ua), React.createElement(\"div\", null, items));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(_ref2) {\n        var query;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                query = _ref2.query;\n                console.log('list getInitialProps....');\n                return _context2.abrupt(\"return\", loadData(query));\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getInitialProps(_x2) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Page;\n}(React.Component);\n\nexport default Page;","map":{"version":3,"sources":["/Users/wanjia/Documents/works/gitrepos/tpl/tpl-next/pages/content/list.js"],"names":["React","Error","ActiveLink","api","PageUI","HtmlHeader","request","Router","loadData","query","props","get","url","params","moduleId","cache","res1","catId","res2","code","catList","data","list","catError","error","contentList","contentError","title","name","keywords","description","console","log","Page","ua","items","map","item","id","pathname","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Error from 'next/error';\n\nimport ActiveLink from \"../../components/Activelink\";\nimport api from \"../../api\";\nimport \"../../assets/style.scss\"\n\nimport PageUI from '../../components/PageUI'\nimport HtmlHeader from \"../../components/HtmlHeader\";\nimport request from \"../../api/request\";\n\nimport Router from 'next/router'\n\nconst loadData = async (query)=>{\n    let props = {};\n\n    const res1 =  await api.request.get({\n        url: '/getCats',\n        params:{\n            moduleId:'201412290839325502'\n        },\n        cache:true\n    });\n\n    const res2 = await api.request.get({\n        url: '/getContentList',\n        params:{\n            catId:query.catId\n        },\n        cache:true\n    });\n\n    if(res1.code == 1)\n        props.catList = res1.data.list;\n    else{\n        props.catError = res1.error;\n    }\n    if(res2.code == 1){\n        props.contentList = res2.data.list;\n    }\n    else{\n        props.contentError = res2.error;\n    }\n\n    props.title = props.catList[0].name\n    props.keywords = \"文章列表关键词\"\n    props.description = \"这里是文章列表描述\"\n    console.log('list getInitialProps ended....')\n    return props;\n}\n\nclass Page  extends React.Component {\n\n    static async  getInitialProps({query}) {\n        console.log('list getInitialProps....')\n        return loadData(query);\n    }\n    componentDidMount(){\n        console.log('start componentDidMount....')\n    }\n    componentDidUpdate(){\n        console.log('start componentDidUpdate....')\n    }\n\n    render() {\n        console.log('start render....')\n        if (this.props.error) {\n            return <Error statusCode={this.props.error.code} />;\n        }\n        const ua = <div className='example'>Hello World!</div>\n        const items = this.props.contentList.map((item)=>\n            <li key={item.id}>\n            <ActiveLink  as={`/c/i/${item.id}`} href={{ pathname: '/content/info', query: { id: item.id }}} passHref>\n                 {item.title}\n             </ActiveLink>\n            </li>)\n\n        return <div>\n            <HtmlHeader ktitle={this.props.title} keywords={this.props.keywords} description={this.props.description}/>\n            <PageUI.Navbar list={this.props.catList}/>\n            <div>{ua}</div>\n            <div>{items}</div>\n        </div>\n    }\n}\n\nexport default Page;\n"]},"metadata":{},"sourceType":"module"}