{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport React from 'react';\nimport Error from 'next/error';\nimport Link from \"next/link\";\nimport api from \"../../api\";\nimport \"../../assets/style.scss\";\nimport PageUI from '../../components/PageUI';\nimport HtmlHeader from \"../../components/HtmlHeader\";\nimport request from \"../../api/request\";\nimport Router from 'next/router';\n\nvar loadData =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(query) {\n    var props, res1, res2;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            props = {};\n            _context.next = 3;\n            return api.request.get({\n              url: '/getCats',\n              params: {\n                moduleId: '201412290839325502'\n              },\n              cache: true\n            });\n\n          case 3:\n            res1 = _context.sent;\n            _context.next = 6;\n            return api.request.get({\n              url: '/getContentList',\n              params: {\n                catId: query.catId\n              },\n              cache: true\n            });\n\n          case 6:\n            res2 = _context.sent;\n            if (res1.code == 1) props.catList = res1.data.list;else {\n              props.catError = res1.error;\n            }\n\n            if (res2.code == 1) {\n              props.contentList = res2.data.list;\n            } else {\n              props.contentError = res2.error;\n            }\n\n            props.title = props.catList[0].name;\n            props.keywords = \"文章列表关键词\";\n            props.description = \"这里是文章列表描述\";\n            console.log('list getInitialProps ended....');\n            return _context.abrupt(\"return\", props);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function loadData(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar Page =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Page, _React$Component);\n\n  function Page() {\n    _classCallCheck(this, Page);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Page).apply(this, arguments));\n  }\n\n  _createClass(Page, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log('start componentDidMount....');\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      console.log('start componentDidUpdate....');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log('start render....');\n\n      if (this.props.error) {\n        return React.createElement(Error, {\n          statusCode: this.props.error.code\n        });\n      }\n\n      var ua = React.createElement(\"div\", {\n        className: \"example\"\n      }, \"Hello World!\");\n      var items = this.props.contentList.map(function (item) {\n        return React.createElement(\"li\", {\n          key: item.id\n        }, React.createElement(Link, {\n          as: \"/c/i/\".concat(item.id),\n          href: {\n            pathname: '/content/info',\n            query: {\n              id: item.id\n            }\n          },\n          passHref: true\n        }, React.createElement(\"a\", null, item.title)));\n      });\n      return React.createElement(\"div\", null, React.createElement(HtmlHeader, {\n        title: this.props.title,\n        keywords: this.props.keywords,\n        description: this.props.description\n      }), React.createElement(PageUI.Navbar, {\n        list: this.props.catList\n      }), React.createElement(\"div\", null, ua), React.createElement(\"div\", null, items));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(_ref2) {\n        var query;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                query = _ref2.query;\n                console.log('list getInitialProps....');\n                return _context2.abrupt(\"return\", loadData(query));\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getInitialProps(_x2) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Page;\n}(React.Component);\n\nexport default Page;","map":null,"metadata":{},"sourceType":"module"}